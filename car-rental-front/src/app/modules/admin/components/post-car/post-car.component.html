<div nz-row class="imgDiv">
   <h2>Add Car</h2>
</div>

<div class="container">
    <form nz-form [formGroup]="carForm" (ngSubmit)="addCar()">
      
      <div class="file-upload-container">
        <label nz-button nzType="default" class="file-upload-label">
          <span>Select a File</span>
          <input type="file" id="fileInput" (change)="onFileSelected($event)" hidden />
          <i nz-icon nzType="paper-clip"></i>
        </label>
      
        <div *ngIf="selectedFile" class="image-preview">
          <div class="circle-image">
            <img [src]="imgPreview" alt="Selected Image" class="preview-image" />
          </div>
        </div>
      </div>
      
      <div nz-col nzSpan="24">
        <nz-form-item>
          <nz-form-label [nzSpan]="6">Brand</nz-form-label>
          <nz-form-control nzHasFeedback [nzXs]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a brand" formControlName="brand">
              <nz-option *ngFor="let brand of listOfBrands" [nzValue]="brand" [nzLabel]="brand"></nz-option>
            </nz-select>
            <div *ngIf="carForm.controls['brand'].invalid && carForm.controls['brand'].touched" class="error">
               <span *ngIf="carForm.controls['brand'].hasError('required')">
                   Brand is required.
               </span>
            </div>
          </nz-form-control>
        </nz-form-item>
      </div>
      
      <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Car Name</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <input type="text" formControlName="name" nz-input placeholder="Enter car name">
          <div *ngIf="carForm.controls['name'].invalid && carForm.controls['name'].touched" class="error">
            <span *ngIf="carForm.controls['name'].hasError('required')">
                Name is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Type</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select type" formControlName="type">
            <nz-option *ngFor="let type of listOfTypes" [nzValue]="type" [nzLabel]="type"></nz-option>
          </nz-select>
          <div *ngIf="carForm.controls['type'].invalid && carForm.controls['type'].touched" class="error">
            <span *ngIf="carForm.controls['type'].hasError('required')">
               Type is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Transmission</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select transmission" formControlName="transmission">
            <nz-option *ngFor="let transmission of listOfTransmission" [nzValue]="transmission" [nzLabel]="transmission"></nz-option>
          </nz-select>
          <div *ngIf="carForm.controls['transmission'].invalid && carForm.controls['transmission'].touched" class="error">
            <span *ngIf="carForm.controls['transmission'].hasError('required')">
                Transmission is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Color</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select color" formControlName="color">
            <nz-option *ngFor="let color of listOfColor" [nzValue]="color" [nzLabel]="color"></nz-option>
          </nz-select>
          <div *ngIf="carForm.controls['color'].invalid && carForm.controls['color'].touched" class="error">
            <span *ngIf="carForm.controls['color'].hasError('required')">
                Color is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>
    
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Model Year</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <nz-date-picker formControlName="modelYear" nzPlaceHolder="Select year"></nz-date-picker>
          <div *ngIf="carForm.controls['modelYear'].invalid && carForm.controls['modelYear'].touched" class="error">
            <span *ngIf="carForm.controls['modelYear'].hasError('required')">
                Model is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>
    
    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Price</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <input formControlName="price" type="number" nz-input placeholder="Enter price">
          <div *ngIf="carForm.controls['price'].invalid && carForm.controls['price'].touched" class="error">
            <span *ngIf="carForm.controls['price'].hasError('required')">
                Price is required.
            </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col nzSpan="24">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">Description</nz-form-label>
        <nz-form-control nzHasFeedback [nzXs]="24">
          <textarea nz-input formControlName="description" placeholder="Enter description" rows="3"></textarea>
          <div *ngIf="carForm.controls['description'].invalid && carForm.controls['description'].touched" class="error">
             <span *ngIf="carForm.controls['description'].hasError('required')">
                 Description is required.
             </span>
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>

      <nz-form-item>
        <nz-form-control [nzSpan]="24" class="submit-button">
          <button nz-button nzType="primary" [disabled]="carForm.invalid">Add Car</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </div>
  